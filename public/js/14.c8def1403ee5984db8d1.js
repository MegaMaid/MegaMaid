webpackJsonp([14],{JKzV:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("Xxa5"),s=r.n(o),a=r("2gGM"),i=r.n(a),m=r("NYxO");var l={middleware:"admin",scrollToTop:!1,metaInfo:function(){return{title:this.$t("plex")+" "+this.$t("settings")}},data:function(){return{loading:!0,form:new i.a({type:"",from_name:"",from_address:"",key:"",secret:"",domain:"",region:"",host:"",port:"",encryption:"",username:"",password:""})}},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t})({showFieldRegion:function(){return"ses"===this.form.type},showFieldKey:function(){return"ses"===this.form.type},showFieldSecret:function(){return["mailgun","ses","sparkpost"].includes(this.form.type)},showFieldDomain:function(){return"mailgun"===this.form.type}},Object(m.mapGetters)({email:"config/email"})),watch:{email:function(t){var e=this;this.form.keys().forEach(function(r){e.form[r]=t[r]||null}),this.form.type||(this.form.type="manual"),this.loading=!1}},created:function(){this.loading=!0,this.$store.dispatch("config/fetchEmail")},methods:{update:function(){var t,e=(t=s.a.mark(function t(){var e,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.post("/api/settings/email");case 2:e=t.sent,r=e.data,this.$store.dispatch("config/updateEmail",r);case 5:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function o(s,a){try{var i=e[s](a),m=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(m).then(function(t){o("next",t)},function(t){o("throw",t)});t(m)}("next")})});return function(){return e.apply(this,arguments)}}()}},n=r("XyMi"),c=Object(n.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",{attrs:{title:t.$t("email")+" "+t.$t("settings")}},[t.loading?r("div",{staticClass:"text-center m-5"},[r("h2",[t._v(t._s(t.$t("loading")+" "+t.$t("email")+" "+t.$t("settings")))]),t._v(" "),r("fa",{staticClass:"global-searching-spinner mt-3",attrs:{icon:"cog",size:"6x",spin:""}})],1):t._e(),t._v(" "),t.loading?t._e():r("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)},keydown:function(e){t.form.onKeydown(e)}}},[r("alert-success",{attrs:{form:t.form,message:t.$t("info_updated")}}),t._v(" "),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-type")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("type")},attrs:{name:"type"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"type",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"manual"}},[t._v("Manually Send Links")]),t._v(" "),r("option",{attrs:{value:"smtp"}},[t._v("SMTP Server")]),t._v(" "),r("option",{attrs:{value:"mailgun"}},[t._v("Mailgun")]),t._v(" "),r("option",{attrs:{value:"sparkpost"}},[t._v("SparkPost")]),t._v(" "),r("option",{attrs:{value:"ses"}},[t._v("Amazon SES")])]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"type"}})],1)]),t._v(" "),"manual"!==t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-from_name")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.from_name,expression:"form['from_name']"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("from_name")},attrs:{type:"text",name:"from_name"},domProps:{value:t.form.from_name},on:{input:function(e){e.target.composing||t.$set(t.form,"from_name",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"from_name"}})],1)]):t._e(),t._v(" "),"manual"!==t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-from_address")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.from_address,expression:"form['from_address']"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("from_address")},attrs:{type:"text",name:"from_address"},domProps:{value:t.form.from_address},on:{input:function(e){e.target.composing||t.$set(t.form,"from_address",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"from_address"}})],1)]):t._e(),t._v(" "),t.showFieldDomain?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-domain")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.domain,expression:"form.domain"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("domain")},attrs:{type:"text",name:"domain"},domProps:{value:t.form.domain},on:{input:function(e){e.target.composing||t.$set(t.form,"domain",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"domain"}})],1)]):t._e(),t._v(" "),t.showFieldKey?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-key")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.key,expression:"form.key"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("key")},attrs:{type:"text",name:"key"},domProps:{value:t.form.key},on:{input:function(e){e.target.composing||t.$set(t.form,"key",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"key"}})],1)]):t._e(),t._v(" "),t.showFieldSecret?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-secret")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.secret,expression:"form.secret"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("secret")},attrs:{type:"text",name:"secret"},domProps:{value:t.form.secret},on:{input:function(e){e.target.composing||t.$set(t.form,"secret",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"secret"}})],1)]):t._e(),t._v(" "),t.showFieldRegion?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-region")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.region,expression:"form.region"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("region")},attrs:{type:"text",name:"region"},domProps:{value:t.form.region},on:{input:function(e){e.target.composing||t.$set(t.form,"region",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"region"}})],1)]):t._e(),t._v(" "),"smtp"===t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-host")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.host,expression:"form.host"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("host")},attrs:{type:"text",name:"host"},domProps:{value:t.form.host},on:{input:function(e){e.target.composing||t.$set(t.form,"host",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"host"}})],1)]):t._e(),t._v(" "),"smtp"===t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-port")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.port,expression:"form.port"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("port")},attrs:{type:"number",name:"port"},domProps:{value:t.form.port},on:{input:function(e){e.target.composing||t.$set(t.form,"port",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"port"}})],1)]):t._e(),t._v(" "),"smtp"===t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-encryption")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.encryption,expression:"form.encryption"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("encryption")},attrs:{name:"encryption"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"encryption",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("None")]),t._v(" "),r("option",{attrs:{value:"tls"}},[t._v("TLS")]),t._v(" "),r("option",{attrs:{value:"ssl"}},[t._v("SSL")])]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"encryption"}})],1)]):t._e(),t._v(" "),"smtp"===t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-username")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("username")},attrs:{type:"text",name:"username"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"username"}})],1)]):t._e(),t._v(" "),"smtp"===t.form.type?r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("email-password")))]),t._v(" "),r("div",{staticClass:"col-md-7"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"text",name:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"password"}}),t._v(" "),r("hr"),t._v(" "),r("p",{domProps:{innerHTML:t._s(t.$t("email-password-warning"))}})],1)]):t._e(),t._v(" "),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-9 ml-md-auto"},[r("v-button",{attrs:{loading:t.form.busy,type:"success"}},[t._v(t._s(t.$t("update")))])],1)])],1)])},[],!1,null,null,null);e.default=c.exports}});
//# sourceMappingURL=14.c8def1403ee5984db8d1.js.map